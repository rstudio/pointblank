<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Table Transformer: slice a table with a slice point on a time column — tt_time_slice • pointblank</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Table Transformer: slice a table with a slice point on a time column — tt_time_slice"><meta name="description" content="With any table object containing date, date-time columns, or a mixture
thereof, any one of those columns can be used to effectively slice the data
table in two with a slice_point: and you get to choose which of those
slices you want to keep. The slice point can be defined in several ways. One
method involves using a decimal value between 0 and 1, which defines the
slice point as the time instant somewhere between the earliest time value (at
0) and the latest time value (at 1). Another way of defining the slice
point is by supplying a time value, and the following input types are
accepted: (1) an ISO 8601 formatted time string (as a date or a date-time),
(2) a POSIXct time, or (3) a Date object."><meta property="og:description" content="With any table object containing date, date-time columns, or a mixture
thereof, any one of those columns can be used to effectively slice the data
table in two with a slice_point: and you get to choose which of those
slices you want to keep. The slice point can be defined in several ways. One
method involves using a decimal value between 0 and 1, which defines the
slice point as the time instant somewhere between the earliest time value (at
0) and the latest time value (at 1). Another way of defining the slice
point is by supplying a time value, and the following input types are
accepted: (1) an ISO 8601 formatted time string (as a date or a date-time),
(2) a POSIXct time, or (3) a Date object."><meta property="og:image" content="https://rstudio.github.io/pointblank/logo.svg"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pointblank</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.12.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pointblank.html">Get Started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Validation Workflows</h6></li>
    <li><a class="dropdown-item" href="../articles/validation_workflows.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-I.html">VALID-I: Data Quality Reporting</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-II.html">VALID-II: Pipeline Data Validation</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-III.html">VALID-III: Expectations in Unit Tests</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-IV.html">VALID-IV: Data Tests for Conditionals</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-V.html">VALID-V: Table Scan</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-VI.html">VALID-VI: R Markdown Document Validation</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Management</h6></li>
    <li><a class="dropdown-item" href="../articles/INFO-1.html">Intro to Information Management</a></li>
    <li><a class="dropdown-item" href="../articles/INFO-2.html">Advanced Information Management</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/pointblank/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Table Transformer: slice a table with a slice point on a time column</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/pointblank/blob/main/R/table_transformers.R" class="external-link"><code>R/table_transformers.R</code></a></small>
      <div class="d-none name"><code>tt_time_slice.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>With any table object containing date, date-time columns, or a mixture
thereof, any one of those columns can be used to effectively slice the data
table in two with a <code>slice_point</code>: and you get to choose which of those
slices you want to keep. The slice point can be defined in several ways. One
method involves using a decimal value between <code>0</code> and <code>1</code>, which defines the
slice point as the time instant somewhere between the earliest time value (at
<code>0</code>) and the latest time value (at <code>1</code>). Another way of defining the slice
point is by supplying a time value, and the following input types are
accepted: (1) an ISO 8601 formatted time string (as a date or a date-time),
(2) a <code>POSIXct</code> time, or (3) a <code>Date</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tt_time_slice</span><span class="op">(</span></span>
<span>  <span class="va">tbl</span>,</span>
<span>  time_column <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  slice_point <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"left"</span>, <span class="st">"right"</span><span class="op">)</span>,</span>
<span>  arrange <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-tbl">tbl<a class="anchor" aria-label="anchor" href="#arg-tbl"></a></dt>
<dd><p><em>A data table</em></p>
<p><code>obj:&lt;tbl_*&gt;</code> // <strong>required</strong></p>
<p>A table object to be used as input for the transformation. This can be a
data frame, a tibble, a <code>tbl_dbi</code> object, or a <code>tbl_spark</code> object.</p></dd>


<dt id="arg-time-column">time_column<a class="anchor" aria-label="anchor" href="#arg-time-column"></a></dt>
<dd><p><em>Column with time data</em></p>
<p><code>scalar&lt;character&gt;</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>The time-based column that will be used as a basis for the slicing. If no
time column is provided then the first one found will be used.</p></dd>


<dt id="arg-slice-point">slice_point<a class="anchor" aria-label="anchor" href="#arg-slice-point"></a></dt>
<dd><p><code>scalar&lt;numeric|character|POSIXct|Date&gt;</code> // <em>default:</em> <code>0</code></p>
<p>The location on the <code>time_column</code> where the slicing will occur. This can
either be a decimal value from <code>0</code> to <code>1</code>, an ISO 8601 formatted time
string (as a date or a date-time), a <code>POSIXct</code> time, or a <code>Date</code> object.</p></dd>


<dt id="arg-keep">keep<a class="anchor" aria-label="anchor" href="#arg-keep"></a></dt>
<dd><p><em>Data slice to keep</em></p>
<p><code>singl-kw:[left|right]</code> // <em>default:</em> <code>"left"</code></p>
<p>Which slice should be kept? The <code>"left"</code> side (the default) contains data
rows that are earlier than the <code>slice_point</code> and the <code>"right"</code> side will
have rows that are later.</p></dd>


<dt id="arg-arrange">arrange<a class="anchor" aria-label="anchor" href="#arg-arrange"></a></dt>
<dd><p><em>Arrange data slice by the time data?</em></p>
<p><code>scalar&lt;logical&gt;</code> // <em>default:</em> <code>FALSE</code></p>
<p>Should the slice be arranged by the <code>time_column</code>? This may be useful if
the input <code>tbl</code> isn't ordered by the <code>time_column</code>. By default, this is
<code>FALSE</code> and the original ordering is retained.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame, a tibble, a <code>tbl_dbi</code> object, or a <code>tbl_spark</code> object
depending on what was provided as <code>tbl</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>There is the option to <code>arrange</code> the table by the date or date-time values in
the <code>time_column</code>. This ordering is always done in an ascending manner. Any
<code>NA</code>/<code>NULL</code> values in the <code>time_column</code> will result in the corresponding rows
can being removed (no matter which slice is retained).</p>
    </div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>



<p>Let's use the <code>game_revenue</code> dataset, included in the <strong>pointblank</strong> package,
as the input table for the first demo. It has entries in the first 21 days of
2015 and we'll elect to get all of the records where the <code>time</code> values are
strictly for the first 15 days of 2015. The <code>keep</code> argument has a default of
<code>"left"</code> so all rows where the <code>time</code> column is less than
<code>"2015-01-16 00:00:00"</code> will be kept.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/tt_time_slice.html">tt_time_slice</a></span><span class="op">(</span></span>
<span>  tbl <span class="op">=</span> <span class="va">game_revenue</span>,</span>
<span>  time_column <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>  slice_point <span class="op">=</span> <span class="st">"2015-01-16"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1,208 x 11</span></span>
<span><span class="co">#&gt;    player_id       session_id  session_start       time                item_type</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;           &lt;chr&gt;       &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;</span></span>
<span><span class="co">#&gt;  1 ECPANOIXLZHF896 ECPANOIXLZ~ 2015-01-01 01:31:03 2015-01-01 01:31:27 iap</span></span>
<span><span class="co">#&gt;  2 ECPANOIXLZHF896 ECPANOIXLZ~ 2015-01-01 01:31:03 2015-01-01 01:36:57 iap</span></span>
<span><span class="co">#&gt;  3 ECPANOIXLZHF896 ECPANOIXLZ~ 2015-01-01 01:31:03 2015-01-01 01:37:45 iap</span></span>
<span><span class="co">#&gt;  4 ECPANOIXLZHF896 ECPANOIXLZ~ 2015-01-01 01:31:03 2015-01-01 01:42:33 ad</span></span>
<span><span class="co">#&gt;  5 ECPANOIXLZHF896 ECPANOIXLZ~ 2015-01-01 11:50:02 2015-01-01 11:55:20 ad</span></span>
<span><span class="co">#&gt;  6 ECPANOIXLZHF896 ECPANOIXLZ~ 2015-01-01 11:50:02 2015-01-01 12:08:56 ad</span></span>
<span><span class="co">#&gt;  7 ECPANOIXLZHF896 ECPANOIXLZ~ 2015-01-01 11:50:02 2015-01-01 12:14:08 ad</span></span>
<span><span class="co">#&gt;  8 ECPANOIXLZHF896 ECPANOIXLZ~ 2015-01-01 11:50:02 2015-01-01 12:21:44 ad</span></span>
<span><span class="co">#&gt;  9 ECPANOIXLZHF896 ECPANOIXLZ~ 2015-01-01 11:50:02 2015-01-01 12:24:20 ad</span></span>
<span><span class="co">#&gt; 10 FXWUORGYNJAE271 FXWUORGYNJ~ 2015-01-01 15:17:18 2015-01-01 15:19:36 ad</span></span>
<span><span class="co">#&gt; # i 1,198 more rows</span></span>
<span><span class="co">#&gt; # i 6 more variables: item_name &lt;chr&gt;, item_revenue &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   session_duration &lt;dbl&gt;, start_day &lt;date&gt;, acquisition &lt;chr&gt;, country &lt;chr&gt;</span></span></code></pre><p></p></div>
<p>Omit the first 25% of records from <code>small_table</code>, also included in the
package, with a fractional <code>slice_point</code> of <code>0.25</code> on the basis of a timeline
that begins at <code>2016-01-04 11:00:00</code> and ends at <code>2016-01-30 11:23:00</code>.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">small_table</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/tt_time_slice.html">tt_time_slice</a></span><span class="op">(</span></span>
<span>    slice_point <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>    keep <span class="op">=</span> <span class="st">"right"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 8 x 8</span></span>
<span><span class="co">#&gt;   date_time           date           a b             c     d e     f</span></span>
<span><span class="co">#&gt;   &lt;dttm&gt;              &lt;date&gt;     &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 2016-01-11 06:15:00 2016-01-11     4 2-dhe-923     4 3291. TRUE  mid</span></span>
<span><span class="co">#&gt; 2 2016-01-15 18:46:00 2016-01-15     7 1-knw-093     3  843. TRUE  high</span></span>
<span><span class="co">#&gt; 3 2016-01-17 11:27:00 2016-01-17     4 5-boe-639     2 1036. FALSE low</span></span>
<span><span class="co">#&gt; 4 2016-01-20 04:30:00 2016-01-20     3 5-bce-642     9  838. FALSE high</span></span>
<span><span class="co">#&gt; 5 2016-01-20 04:30:00 2016-01-20     3 5-bce-642     9  838. FALSE high</span></span>
<span><span class="co">#&gt; 6 2016-01-26 20:07:00 2016-01-26     4 2-dmx-010     7  834. TRUE  low</span></span>
<span><span class="co">#&gt; 7 2016-01-28 02:51:00 2016-01-28     2 7-dmx-010     8  108. FALSE low</span></span>
<span><span class="co">#&gt; 8 2016-01-30 11:23:00 2016-01-30     1 3-dka-303    NA 2230. TRUE  high</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>


<p>12-6</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Table Transformers:
<code><a href="get_tt_param.html">get_tt_param</a>()</code>,
<code><a href="tt_string_info.html">tt_string_info</a>()</code>,
<code><a href="tt_summary_stats.html">tt_summary_stats</a>()</code>,
<code><a href="tt_tbl_colnames.html">tt_tbl_colnames</a>()</code>,
<code><a href="tt_tbl_dims.html">tt_tbl_dims</a>()</code>,
<code><a href="tt_time_shift.html">tt_time_shift</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Richard Iannone, Mauricio Vargas, June Choe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

