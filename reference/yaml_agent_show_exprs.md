# Display validation expressions using **pointblank** YAML

The `yaml_agent_show_exprs()` function follows the specifications of a
**pointblank** YAML file to generate and show the **pointblank**
expressions for generating the described validation plan. The
expressions are shown in the console, providing an opportunity to copy
the statements and extend as needed. A **pointblank** YAML file can
itself be generated by using the
[`yaml_write()`](https://rstudio.github.io/pointblank/reference/yaml_write.md)
function with a pre-existing *agent*, or, it can be carefully written by
hand.

## Usage

``` r
yaml_agent_show_exprs(filename, path = NULL)
```

## Arguments

- filename:

  *File name*

  `scalar<character>` // **required**

  The name of the YAML file that contains fields related to an *agent*.

- path:

  \#' @param path *File path*

  `scalar<character>` // *default:* `NULL` (`optional`)

  An optional path to the YAML file (combined with `filename`).

## Examples

Let's create a validation plan for the data quality analysis of the
`small_table` dataset. We need an agent and its table-prep formula
enables retrieval of the target table.

    agent <-
      create_agent(
        tbl = ~ small_table,
        tbl_name = "small_table",
        label = "A simple example with the `small_table`.",
        actions = action_levels(
          warn_at = 0.10,
          stop_at = 0.25,
          notify_at = 0.35
        )
      ) %>%
      col_exists(columns = c(date, date_time)) %>%
      col_vals_regex(
        columns = b,
        regex = "[0-9]-[a-z]{3}-[0-9]{3}"
      ) %>%
      rows_distinct() %>%
      col_vals_gt(columns = d, value = 100) %>%
      col_vals_lte(columns = c, value = 5)

The agent can be written to a **pointblank** YAML file with
[`yaml_write()`](https://rstudio.github.io/pointblank/reference/yaml_write.md).

    yaml_write(
      agent = agent,
      filename = "agent-small_table.yml"
    )

At a later time, the YAML file can be read into a new agent with the
[`yaml_read_agent()`](https://rstudio.github.io/pointblank/reference/yaml_read_agent.md)
function.

    agent <- yaml_read_agent(filename = "agent-small_table.yml")

    agent

![This image was generated from the first code example in the
\`yaml_agent_show_exprs()\` help
file.](https://raw.githubusercontent.com/rstudio/pointblank/main/images/man_yaml_agent_show_exprs_1.png)

To get a sense of which expressions are being used to generate the new
agent, we can use `yaml_agent_show_exprs()`.

    yaml_agent_show_exprs(filename = "agent-small_table.yml")

    create_agent(
      tbl = ~small_table,
      actions = action_levels(
        warn_at = 0.1,
        stop_at = 0.25,
        notify_at = 0.35
      ),
      tbl_name = "small_table",
      label = "A simple example with the `small_table`."
    ) %>%
      col_exists(
        columns = c(date, date_time)
      ) %>%
      col_vals_regex(
        columns = b,
        regex = "[0-9]-[a-z]{3}-[0-9]{3}"
      ) %>%
      rows_distinct() %>%
      col_vals_gt(
        columns = d,
        value = 100
      ) %>%
      col_vals_lte(
        columns = c,
        value = 5
      )

## Function ID

11-6

## See also

Other pointblank YAML:
[`yaml_agent_interrogate()`](https://rstudio.github.io/pointblank/reference/yaml_agent_interrogate.md),
[`yaml_agent_string()`](https://rstudio.github.io/pointblank/reference/yaml_agent_string.md),
[`yaml_exec()`](https://rstudio.github.io/pointblank/reference/yaml_exec.md),
[`yaml_informant_incorporate()`](https://rstudio.github.io/pointblank/reference/yaml_informant_incorporate.md),
[`yaml_read_agent()`](https://rstudio.github.io/pointblank/reference/yaml_read_agent.md),
[`yaml_read_informant()`](https://rstudio.github.io/pointblank/reference/yaml_read_informant.md),
[`yaml_write()`](https://rstudio.github.io/pointblank/reference/yaml_write.md)
