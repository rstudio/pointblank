<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Put the current datetime into a file name — affix_datetime • pointblank</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Put the current datetime into a file name — affix_datetime"><meta name="description" content="This function helps to affix the current datetime to a filename. This is
useful when writing agent and/or informant objects to disk as part of a
continuous process. The datetime string can be based on the current UTC time
or the local system time. The datetime can be affixed either to the end of
the filename (before the file extension) or at the beginning with a
customizable delimiter. Optionally, the time zone information can be
included. If the datetime is based on the local system time, the user system
time zone is shown with the format &amp;lt;time&amp;gt;(+/-)hhmm. If using UTC time, then
the &amp;lt;time&amp;gt;Z format is adopted.
The x_write_disk(), yaml_write() functions allow for the writing of
pointblank objects to disk. The modification of the filename string takes
effect immediately but not at the time of writing a file to disk. In most
cases, especially when using affix_datetime() with the aforementioned
file-writing functions, the file timestamps should approximate the time
components affixed to the filenames."><meta property="og:description" content="This function helps to affix the current datetime to a filename. This is
useful when writing agent and/or informant objects to disk as part of a
continuous process. The datetime string can be based on the current UTC time
or the local system time. The datetime can be affixed either to the end of
the filename (before the file extension) or at the beginning with a
customizable delimiter. Optionally, the time zone information can be
included. If the datetime is based on the local system time, the user system
time zone is shown with the format &amp;lt;time&amp;gt;(+/-)hhmm. If using UTC time, then
the &amp;lt;time&amp;gt;Z format is adopted.
The x_write_disk(), yaml_write() functions allow for the writing of
pointblank objects to disk. The modification of the filename string takes
effect immediately but not at the time of writing a file to disk. In most
cases, especially when using affix_datetime() with the aforementioned
file-writing functions, the file timestamps should approximate the time
components affixed to the filenames."><meta property="og:image" content="https://rstudio.github.io/pointblank/logo.svg"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pointblank</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.12.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pointblank.html">Get Started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Validation Workflows</h6></li>
    <li><a class="dropdown-item" href="../articles/validation_workflows.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-I.html">VALID-I: Data Quality Reporting</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-II.html">VALID-II: Pipeline Data Validation</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-III.html">VALID-III: Expectations in Unit Tests</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-IV.html">VALID-IV: Data Tests for Conditionals</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-V.html">VALID-V: Table Scan</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-VI.html">VALID-VI: R Markdown Document Validation</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Management</h6></li>
    <li><a class="dropdown-item" href="../articles/INFO-1.html">Intro to Information Management</a></li>
    <li><a class="dropdown-item" href="../articles/INFO-2.html">Advanced Information Management</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/pointblank/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Put the current datetime into a file name</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/pointblank/blob/main/R/file_naming.R" class="external-link"><code>R/file_naming.R</code></a></small>
      <div class="d-none name"><code>affix_datetime.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function helps to affix the current datetime to a filename. This is
useful when writing <em>agent</em> and/or <em>informant</em> objects to disk as part of a
continuous process. The datetime string can be based on the current UTC time
or the local system time. The datetime can be affixed either to the end of
the filename (before the file extension) or at the beginning with a
customizable delimiter. Optionally, the time zone information can be
included. If the datetime is based on the local system time, the user system
time zone is shown with the format <code>&lt;time&gt;(+/-)hhmm</code>. If using UTC time, then
the <code>&lt;time&gt;Z</code> format is adopted.</p>
<p>The <code><a href="x_write_disk.html">x_write_disk()</a></code>, <code><a href="yaml_write.html">yaml_write()</a></code> functions allow for the writing of
<strong>pointblank</strong> objects to disk. The modification of the filename string takes
effect immediately but not at the time of writing a file to disk. In most
cases, especially when using <code>affix_datetime()</code> with the aforementioned
file-writing functions, the file timestamps should approximate the time
components affixed to the filenames.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">affix_datetime</span><span class="op">(</span></span>
<span>  <span class="va">filename</span>,</span>
<span>  position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"end"</span>, <span class="st">"start"</span><span class="op">)</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"%Y-%m-%d_%H-%M-%S"</span>,</span>
<span>  delimiter <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>  utc_time <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_tz <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-filename">filename<a class="anchor" aria-label="anchor" href="#arg-filename"></a></dt>
<dd><p>The filename to modify.</p></dd>


<dt id="arg-position">position<a class="anchor" aria-label="anchor" href="#arg-position"></a></dt>
<dd><p>Where to place the formatted datetime. This could either be
at the <code>"end"</code> of the filename (the default) or at the <code>"start"</code>.</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">base::strptime()</a></code> format string for formatting the
datetime. By default, this is <code>"%Y-%m-%dT%H:%M:%S"</code> which expresses the
date according to the ISO 8601 standard. For example, if the current
datetime is <code>2020-12-04 13:11:23</code>, the formatted string would become
<code>"2020-12-04T13:11:23"</code>. Refer to the documentation on <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">base::strptime()</a></code>
for conversion specifications if planning to use a different format string.</p></dd>


<dt id="arg-delimiter">delimiter<a class="anchor" aria-label="anchor" href="#arg-delimiter"></a></dt>
<dd><p>The delimiter characters to use for separating the datetime
string from the original file name.</p></dd>


<dt id="arg-utc-time">utc_time<a class="anchor" aria-label="anchor" href="#arg-utc-time"></a></dt>
<dd><p>An option for whether to use the current UTC time to
establish the datetime (the default, with <code>TRUE</code>), or, use the system's
local time (<code>FALSE</code>).</p></dd>


<dt id="arg-add-tz">add_tz<a class="anchor" aria-label="anchor" href="#arg-add-tz"></a></dt>
<dd><p>Should the time zone (as an offset from UTC) be provided? If
<code>TRUE</code> then the UTC offset will be either provided as <code>&lt;time&gt;Z</code> (if
<code>utc_time = TRUE</code>) or <code>&lt;time&gt;(+/-)hhmm</code>. By default, this is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character vector.</p>
    </div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>


<div class="section">
<h3 id="the-basics-of-creating-a-filename-with-the-current-date-and-time">The basics of creating a filename with the current date and time<a class="anchor" aria-label="anchor" href="#the-basics-of-creating-a-filename-with-the-current-date-and-time"></a></h3>


<p>Taking the generic <code>"pb_file"</code> name for a file, we add the current datetime
to it as a suffix.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_datetime.html">affix_datetime</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"pb_file"</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "pb_file_2022-04-01_00-32-53"</span></span></code></pre><p></p></div>
<p>File extensions won't get in the way:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_datetime.html">affix_datetime</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"pb_file.rds"</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "pb_file_2022-04-01_00-32-53.rds"</span></span></code></pre><p></p></div>
<p>The datetime can be used as a prefix.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_datetime.html">affix_datetime</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="st">"pb_file"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"start"</span></span>
<span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "2022-04-01_00-32-53_pb_file"</span></span></code></pre><p></p></div>
<p>The datetime pattern can be changed and so can the delimiter.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_datetime.html">affix_datetime</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="st">"pb_file.yml"</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"%Y%m%d_%H%M%S"</span>,</span>
<span>  delimiter <span class="op">=</span> <span class="st">"-"</span></span>
<span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "pb_file-20220401_003253.yml"</span></span></code></pre><p></p></div>
<p>Time zone information can be included. By default, all datetimes are given in
the UTC time zone.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_datetime.html">affix_datetime</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="st">"pb_file.yml"</span>,</span>
<span>  add_tz <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "pb_file_2022-04-01_00-32-53Z.yml"</span></span></code></pre><p></p></div>
<p>We can use the system's local time zone with <code>utc_time = FALSE</code>.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_datetime.html">affix_datetime</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="st">"pb_file.yml"</span>,</span>
<span>  utc_time <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  add_tz <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "pb_file_2022-03-31_20-32-53-0400.yml"</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="using-a-datetime-based-filename-in-a-pointblank-workflow">Using a datetime-based filename in a <strong>pointblank</strong> workflow<a class="anchor" aria-label="anchor" href="#using-a-datetime-based-filename-in-a-pointblank-workflow"></a></h3>


<p>We can use a file-naming convention involving datetimes when writing output
files immediately after interrogating. This is just one example (any workflow
involving a <code>filename</code> argument is applicable). It's really advantageous to
use datetime-based filenames when interrogating directly from YAML in a
scheduled process, especially if multiple validation runs per day are being
executed on the same target table.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/yaml_agent_interrogate.html">yaml_agent_interrogate</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>    <span class="st">"yaml"</span>, <span class="st">"agent-small_table.yml"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">"pointblank"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/x_write_disk.html">x_write_disk</a></span><span class="op">(</span></span>
<span>    filename <span class="op">=</span> <span class="fu"><a href="../reference/affix_datetime.html">affix_datetime</a></span><span class="op">(</span></span>
<span>      filename <span class="op">=</span> <span class="st">"small_table_agent.rds"</span>,</span>
<span>      delimiter <span class="op">=</span> <span class="st">"-"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    keep_tbl <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    keep_extracts <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div>
<p>In the above, we used the written-to-disk agent (The
<code>"agent-small_table.yml"</code> YAML file) for an interrogation via
<code><a href="yaml_agent_interrogate.html">yaml_agent_interrogate()</a></code>. Then, the results were written to disk as an RDS
file. In the <code>filename</code> argument of <code><a href="x_write_disk.html">x_write_disk()</a></code>, the <code>affix_datetime()</code>
function was used to ensure that frequent runs would produce files whose
names indicate the day and time of execution.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>


<p>13-4</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>The <code><a href="affix_date.html">affix_date()</a></code> function provides the same features except it
produces a date string by default.</p>
<p>Other Utility and Helper Functions:
<code><a href="affix_date.html">affix_date</a>()</code>,
<code><a href="col_schema.html">col_schema</a>()</code>,
<code><a href="from_github.html">from_github</a>()</code>,
<code><a href="has_columns.html">has_columns</a>()</code>,
<code><a href="stop_if_not.html">stop_if_not</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Richard Iannone, Mauricio Vargas, June Choe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

