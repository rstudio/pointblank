<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Execute all agent and informant YAML tasks — yaml_exec • pointblank</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Execute all agent and informant YAML tasks — yaml_exec"><meta name="description" content='The yaml_exec() function takes all relevant pointblank YAML files in a
directory and executes them. Execution involves interrogation of agents for
YAML agents and incorporation of informants for YAML informants. Under the
hood, this uses yaml_agent_interrogate() and yaml_informant_incorporate()
and then x_write_disk() to save the processed objects to an output
directory. These written artifacts can be read in at any later time with the
x_read_disk() function or the read_disk_multiagent() function. This is
useful when data in the target tables are changing and the periodic testing
of such tables is part of a data quality monitoring plan.
The output RDS files are named according to the object type processed, the
target table, and the date-time of processing. For convenience and
modularity, this setup is ideal when a table store YAML file (typically named
"tbl_store.yml" and produced via the tbl_store() and yaml_write()
workflow) is available in the directory, and when table-prep formulas are
accessed by name through tbl_source().
A typical directory of files set up for execution in this way might have the
following contents:
a "tbl_store.yml" file for holding table-prep formulas (created with
tbl_store() and written to YAML with yaml_write())
one or more YAML agent files to validate tables (ideally using
tbl_source())
one or more YAML informant files to provide refreshed metadata on tables
(again, using tbl_source() to reference table preparations is ideal)
an output folder (default is "output") to save serialized versions of
processed agents and informants


Minimal example files of the aforementioned types can be found in the
pointblank package through the following system.file() calls:
system.file("yaml", "agent-small_table.yml", package = "pointblank")
system.file("yaml", "informant-small_table.yml", package = "pointblank")
system.file("yaml", "tbl_store.yml", package = "pointblank")


The directory itself can be accessed using system.file("yaml", package = "pointblank").'><meta property="og:description" content='The yaml_exec() function takes all relevant pointblank YAML files in a
directory and executes them. Execution involves interrogation of agents for
YAML agents and incorporation of informants for YAML informants. Under the
hood, this uses yaml_agent_interrogate() and yaml_informant_incorporate()
and then x_write_disk() to save the processed objects to an output
directory. These written artifacts can be read in at any later time with the
x_read_disk() function or the read_disk_multiagent() function. This is
useful when data in the target tables are changing and the periodic testing
of such tables is part of a data quality monitoring plan.
The output RDS files are named according to the object type processed, the
target table, and the date-time of processing. For convenience and
modularity, this setup is ideal when a table store YAML file (typically named
"tbl_store.yml" and produced via the tbl_store() and yaml_write()
workflow) is available in the directory, and when table-prep formulas are
accessed by name through tbl_source().
A typical directory of files set up for execution in this way might have the
following contents:
a "tbl_store.yml" file for holding table-prep formulas (created with
tbl_store() and written to YAML with yaml_write())
one or more YAML agent files to validate tables (ideally using
tbl_source())
one or more YAML informant files to provide refreshed metadata on tables
(again, using tbl_source() to reference table preparations is ideal)
an output folder (default is "output") to save serialized versions of
processed agents and informants


Minimal example files of the aforementioned types can be found in the
pointblank package through the following system.file() calls:
system.file("yaml", "agent-small_table.yml", package = "pointblank")
system.file("yaml", "informant-small_table.yml", package = "pointblank")
system.file("yaml", "tbl_store.yml", package = "pointblank")


The directory itself can be accessed using system.file("yaml", package = "pointblank").'><meta property="og:image" content="https://rstudio.github.io/pointblank/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pointblank</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.12.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pointblank.html">Get Started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Validation Workflows</h6></li>
    <li><a class="dropdown-item" href="../articles/validation_workflows.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-I.html">VALID-I: Data Quality Reporting</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-II.html">VALID-II: Pipeline Data Validation</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-III.html">VALID-III: Expectations in Unit Tests</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-IV.html">VALID-IV: Data Tests for Conditionals</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-V.html">VALID-V: Table Scan</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-VI.html">VALID-VI: R Markdown Document Validation</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Management</h6></li>
    <li><a class="dropdown-item" href="../articles/INFO-1.html">Intro to Information Management</a></li>
    <li><a class="dropdown-item" href="../articles/INFO-2.html">Advanced Information Management</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/pointblank/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Execute all agent and informant YAML tasks</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/pointblank/blob/main/R/yaml_exec.R" class="external-link"><code>R/yaml_exec.R</code></a></small>
      <div class="d-none name"><code>yaml_exec.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>yaml_exec()</code> function takes all relevant <strong>pointblank</strong> YAML files in a
directory and executes them. Execution involves interrogation of agents for
YAML agents and incorporation of informants for YAML informants. Under the
hood, this uses <code><a href="yaml_agent_interrogate.html">yaml_agent_interrogate()</a></code> and <code><a href="yaml_informant_incorporate.html">yaml_informant_incorporate()</a></code>
and then <code><a href="x_write_disk.html">x_write_disk()</a></code> to save the processed objects to an output
directory. These written artifacts can be read in at any later time with the
<code><a href="x_read_disk.html">x_read_disk()</a></code> function or the <code><a href="read_disk_multiagent.html">read_disk_multiagent()</a></code> function. This is
useful when data in the target tables are changing and the periodic testing
of such tables is part of a data quality monitoring plan.</p>
<p>The output RDS files are named according to the object type processed, the
target table, and the date-time of processing. For convenience and
modularity, this setup is ideal when a table store YAML file (typically named
<code>"tbl_store.yml"</code> and produced via the <code><a href="tbl_store.html">tbl_store()</a></code> and <code><a href="yaml_write.html">yaml_write()</a></code>
workflow) is available in the directory, and when table-prep formulas are
accessed by name through <code><a href="tbl_source.html">tbl_source()</a></code>.</p>
<p>A typical directory of files set up for execution in this way might have the
following contents:</p><ul><li><p>a <code>"tbl_store.yml"</code> file for holding table-prep formulas (created with
<code><a href="tbl_store.html">tbl_store()</a></code> and written to YAML with <code><a href="yaml_write.html">yaml_write()</a></code>)</p></li>
<li><p>one or more YAML <em>agent</em> files to validate tables (ideally using
<code><a href="tbl_source.html">tbl_source()</a></code>)</p></li>
<li><p>one or more YAML <em>informant</em> files to provide refreshed metadata on tables
(again, using <code><a href="tbl_source.html">tbl_source()</a></code> to reference table preparations is ideal)</p></li>
<li><p>an output folder (default is <code>"output"</code>) to save serialized versions of
processed agents and informants</p></li>
</ul><p>Minimal example files of the aforementioned types can be found in the
<strong>pointblank</strong> package through the following <code><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file()</a></code> calls:</p><ul><li><p><code>system.file("yaml", "agent-small_table.yml", package = "pointblank")</code></p></li>
<li><p><code>system.file("yaml", "informant-small_table.yml", package = "pointblank")</code></p></li>
<li><p><code>system.file("yaml", "tbl_store.yml", package = "pointblank")</code></p></li>
</ul><p>The directory itself can be accessed using <code>system.file("yaml", package = "pointblank")</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">yaml_exec</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  files <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  write_to_disk <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"output"</span><span class="op">)</span>,</span>
<span>  keep_tbl <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  keep_extracts <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>The path that contains the YAML files for agents and informants.</p></dd>


<dt id="arg-files">files<a class="anchor" aria-label="anchor" href="#arg-files"></a></dt>
<dd><p>A vector of YAML files to use in the execution workflow. By
default, <code>yaml_exec()</code> will attempt to process every valid YAML file in
<code>path</code> but supplying a vector here limits the scope to the specified files.</p></dd>


<dt id="arg-write-to-disk">write_to_disk<a class="anchor" aria-label="anchor" href="#arg-write-to-disk"></a></dt>
<dd><p>Should the execution workflow include a step that writes
output files to disk? This internally calls <code><a href="x_write_disk.html">x_write_disk()</a></code> to write RDS
files and uses the base filename of the agent/informant YAML file as part
of the output filename, appending the date-time to the basename.</p></dd>


<dt id="arg-output-path">output_path<a class="anchor" aria-label="anchor" href="#arg-output-path"></a></dt>
<dd><p>The output path for any generated output files. By
default, this will be a subdirectory of the provided <code>path</code> called
<code>"output"</code>.</p></dd>


<dt id="arg-keep-tbl-keep-extracts">keep_tbl, keep_extracts<a class="anchor" aria-label="anchor" href="#arg-keep-tbl-keep-extracts"></a></dt>
<dd><p>For agents, the table may be kept if it is a
data frame object (databases tables will never be pulled for storage) and
<em>extracts</em>, collections of table rows that failed a validation step, may
also be stored. By default, both of these options are set to <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly returns a named vector of file paths for the input files
that were processed; file output paths (for wherever writing occurred) are
given as the names.</p>
    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>


<p>11-8</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other pointblank YAML:
<code><a href="yaml_agent_interrogate.html">yaml_agent_interrogate</a>()</code>,
<code><a href="yaml_agent_show_exprs.html">yaml_agent_show_exprs</a>()</code>,
<code><a href="yaml_agent_string.html">yaml_agent_string</a>()</code>,
<code><a href="yaml_informant_incorporate.html">yaml_informant_incorporate</a>()</code>,
<code><a href="yaml_read_agent.html">yaml_read_agent</a>()</code>,
<code><a href="yaml_read_informant.html">yaml_read_informant</a>()</code>,
<code><a href="yaml_write.html">yaml_write</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The 'yaml' directory that is</span></span></span>
<span class="r-in"><span><span class="co"># accessible in the package through</span></span></span>
<span class="r-in"><span><span class="co"># `system.file()` contains the files</span></span></span>
<span class="r-in"><span><span class="co"># 1. `agent-small_table.yml`</span></span></span>
<span class="r-in"><span><span class="co"># 2. `informant-small_table.yml`</span></span></span>
<span class="r-in"><span><span class="co"># 3. `tbl_store.yml`</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># There are references in YAML files</span></span></span>
<span class="r-in"><span><span class="co"># 1 &amp; 2 to the table store YAML file,</span></span></span>
<span class="r-in"><span><span class="co"># so, they all work together cohesively</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let's process the agent and the</span></span></span>
<span class="r-in"><span><span class="co"># informant YAML files with `yaml_exec()`;</span></span></span>
<span class="r-in"><span><span class="co"># and we'll specify the working directory</span></span></span>
<span class="r-in"><span><span class="co"># as the place where the output RDS files</span></span></span>
<span class="r-in"><span><span class="co"># are written</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">output_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">yaml_exec</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"yaml"</span>, package <span class="op">=</span> <span class="st">"pointblank"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="va">output_dir</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This generates two RDS files in the</span></span></span>
<span class="r-in"><span><span class="co"># working directory: one for the agent</span></span></span>
<span class="r-in"><span><span class="co"># and the other for the informant; each</span></span></span>
<span class="r-in"><span><span class="co"># of them are automatically time-stamped</span></span></span>
<span class="r-in"><span><span class="co"># so that periodic execution can be</span></span></span>
<span class="r-in"><span><span class="co"># safely carried out without risk of</span></span></span>
<span class="r-in"><span><span class="co"># overwriting </span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Richard Iannone, Mauricio Vargas, June Choe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

