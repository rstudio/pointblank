<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read a pointblank YAML file to create an agent object — yaml_read_agent • pointblank</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Read a pointblank YAML file to create an agent object — yaml_read_agent" />
<meta property="og:description" content="With yaml_read_agent() we can read a pointblank YAML file that
describes a validation plan to be carried out by an agent (typically
generated by the yaml_write() function. What's returned is a new agent
with that validation plan, ready to interrogate the target table at will
(using the table-prep formula that is set with the read_fn argument). The
agent can be given more validation steps if needed before using
interrogate() or taking part in any other agent ops (e.g., writing to disk
with outputs intact via x_write_disk() or again to pointblank YAML with
yaml_write()).
To get a picture of how yaml_read_agent() is interpreting the validation
plan specified in the pointblank YAML, we can use the
yaml_agent_show_exprs() function. That function shows us (in the console)
the pointblank expressions for generating the described validation plan." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pointblank</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">0.9.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Validation Workflows</li>
    <li>
      <a href="../articles/validation_workflows.html">Overview</a>
    </li>
    <li>
      <a href="../articles/VALID-I.html">VALID-I: Data Quality Reporting</a>
    </li>
    <li>
      <a href="../articles/VALID-II.html">VALID-II: Pipeline Data Validation</a>
    </li>
    <li>
      <a href="../articles/VALID-III.html">VALID-III: Expectations in Unit Tests</a>
    </li>
    <li>
      <a href="../articles/VALID-IV.html">VALID-IV: Data Tests for Conditionals</a>
    </li>
    <li>
      <a href="../articles/VALID-V.html">VALID-V: Table Scan</a>
    </li>
    <li>
      <a href="../articles/VALID-VI.html">VALID-VI: R Markdown Document Validation</a>
    </li>
    <li class="dropdown-header">Information Management</li>
    <li>
      <a href="../articles/INFO-1.html">Intro to Information Management</a>
    </li>
    <li>
      <a href="../articles/INFO-2.html">Advanced Information Management</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rich-iannone/pointblank/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read a <strong>pointblank</strong> YAML file to create an <em>agent</em> object</h1>
    <small class="dont-index">Source: <a href='https://github.com/rich-iannone/pointblank/blob/master/R/yaml_read_agent.R'><code>R/yaml_read_agent.R</code></a></small>
    <div class="hidden name"><code>yaml_read_agent.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>With <code>yaml_read_agent()</code> we can read a <strong>pointblank</strong> YAML file that
describes a validation plan to be carried out by an <em>agent</em> (typically
generated by the <code><a href='yaml_write.html'>yaml_write()</a></code> function. What's returned is a new <em>agent</em>
with that validation plan, ready to interrogate the target table at will
(using the table-prep formula that is set with the <code>read_fn</code> argument). The
agent can be given more validation steps if needed before using
<code><a href='interrogate.html'>interrogate()</a></code> or taking part in any other agent ops (e.g., writing to disk
with outputs intact via <code><a href='x_write_disk.html'>x_write_disk()</a></code> or again to <strong>pointblank</strong> YAML with
<code><a href='yaml_write.html'>yaml_write()</a></code>).</p>
<p>To get a picture of how <code>yaml_read_agent()</code> is interpreting the validation
plan specified in the <strong>pointblank</strong> YAML, we can use the
<code><a href='yaml_agent_show_exprs.html'>yaml_agent_show_exprs()</a></code> function. That function shows us (in the console)
the <strong>pointblank</strong> expressions for generating the described validation plan.</p>
    </div>

    <pre class="usage"><span class='fu'>yaml_read_agent</span><span class='op'>(</span><span class='va'>filename</span>, path <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>filename</th>
      <td><p>The name of the YAML file that contains fields related to an
<em>agent</em>.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>An optional path to the YAML file (combined with <code>filename</code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>ptblank_agent</code> object.</p>
    <h2 class="hasAnchor" id="function-id"><a class="anchor" href="#function-id"></a>Function ID</h2>

    

<p>11-2</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other pointblank YAML: 
<code><a href='yaml_agent_interrogate.html'>yaml_agent_interrogate</a>()</code>,
<code><a href='yaml_agent_show_exprs.html'>yaml_agent_show_exprs</a>()</code>,
<code><a href='yaml_agent_string.html'>yaml_agent_string</a>()</code>,
<code><a href='yaml_exec.html'>yaml_exec</a>()</code>,
<code><a href='yaml_informant_incorporate.html'>yaml_informant_incorporate</a>()</code>,
<code><a href='yaml_read_informant.html'>yaml_read_informant</a>()</code>,
<code><a href='yaml_write.html'>yaml_write</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'># Let's go through the process of</span>
<span class='co'># developing an agent with a validation</span>
<span class='co'># plan (to be used for the data quality</span>
<span class='co'># analysis of the `small_table` dataset),</span>
<span class='co'># and then offloading that validation</span>
<span class='co'># plan to a pointblank YAML file; this</span>
<span class='co'># will be read in with `yaml_read_agent()`</span>

<span class='co'># Creating an `action_levels` object is a</span>
<span class='co'># common workflow step when creating a</span>
<span class='co'># pointblank agent; we designate failure</span>
<span class='co'># thresholds to the `warn`, `stop`, and</span>
<span class='co'># `notify` states using `action_levels()`</span>
<span class='va'>al</span> <span class='op'>&lt;-</span> 
  <span class='fu'><a href='action_levels.html'>action_levels</a></span><span class='op'>(</span>
    warn_at <span class='op'>=</span> <span class='fl'>0.10</span>,
    stop_at <span class='op'>=</span> <span class='fl'>0.25</span>,
    notify_at <span class='op'>=</span> <span class='fl'>0.35</span>
  <span class='op'>)</span>

<span class='co'># Now create a pointblank `agent` object</span>
<span class='co'># and give it the `al` object (which</span>
<span class='co'># serves as a default for all validation</span>
<span class='co'># steps which can be overridden); the</span>
<span class='co'># data will be referenced in a `read_fn`</span>
<span class='co'># (a requirement for writing to YAML)</span>
<span class='va'>agent</span> <span class='op'>&lt;-</span> 
  <span class='fu'><a href='create_agent.html'>create_agent</a></span><span class='op'>(</span>
    read_fn <span class='op'>=</span> <span class='op'>~</span> <span class='va'>small_table</span>,
    tbl_name <span class='op'>=</span> <span class='st'>"small_table"</span>,
    label <span class='op'>=</span> <span class='st'>"A simple example with the `small_table`."</span>,
    actions <span class='op'>=</span> <span class='va'>al</span>
  <span class='op'>)</span>

<span class='co'># Then, as with any `agent` object, we</span>
<span class='co'># can add steps to the validation plan by</span>
<span class='co'># using as many validation functions as we</span>
<span class='co'># want</span>
<span class='va'>agent</span> <span class='op'>&lt;-</span>
  <span class='va'>agent</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='col_exists.html'>col_exists</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>date</span>, <span class='va'>date_time</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='col_vals_regex.html'>col_vals_regex</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span>,
    regex <span class='op'>=</span> <span class='st'>"[0-9]-[a-z]{3}-[0-9]{3}"</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='rows_distinct.html'>rows_distinct</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='col_vals_gt.html'>col_vals_gt</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span>, value <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='col_vals_lte.html'>col_vals_lte</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>c</span><span class='op'>)</span>, value <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>

<span class='co'># The agent can be written to a pointblank</span>
<span class='co'># YAML file with `yaml_write()`</span>
<span class='fu'><a href='yaml_write.html'>yaml_write</a></span><span class='op'>(</span>
  agent <span class='op'>=</span> <span class='va'>agent</span>,
  filename <span class='op'>=</span> <span class='st'>"agent-small_table.yml"</span>
<span class='op'>)</span>

<span class='co'># The 'agent-small_table.yml' file is</span>
<span class='co'># available in the package through</span>
<span class='co'># `system.file()`</span>
<span class='va'>yml_file</span> <span class='op'>&lt;-</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span>
    <span class='st'>"yaml"</span>, <span class='st'>"agent-small_table.yml"</span>,
    package <span class='op'>=</span> <span class='st'>"pointblank"</span>
  <span class='op'>)</span>

<span class='co'># We can view the YAML file in the console</span>
<span class='co'># with the `yaml_agent_string()` function</span>
<span class='fu'><a href='yaml_agent_string.html'>yaml_agent_string</a></span><span class='op'>(</span>filename <span class='op'>=</span> <span class='va'>yml_file</span><span class='op'>)</span>

<span class='co'># The YAML can also be printed in the console</span>
<span class='co'># by supplying the agent as the input</span>
<span class='fu'><a href='yaml_agent_string.html'>yaml_agent_string</a></span><span class='op'>(</span>agent <span class='op'>=</span> <span class='va'>agent</span><span class='op'>)</span>

<span class='co'># At some later time, the YAML file can</span>
<span class='co'># be read as a new agent with the</span>
<span class='co'># `yaml_read_agent()` function</span>
<span class='va'>agent</span> <span class='op'>&lt;-</span> <span class='fu'>yaml_read_agent</span><span class='op'>(</span>filename <span class='op'>=</span> <span class='va'>yml_file</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>agent</span><span class='op'>)</span>

<span class='co'># We can interrogate the data (which</span>
<span class='co'># is accessible through the `read_fn`)</span>
<span class='co'># with `interrogate()` and get an</span>
<span class='co'># agent with intel, or, we can</span>
<span class='co'># interrogate directly from the YAML</span>
<span class='co'># file with `yaml_agent_interrogate()`</span>
<span class='va'>agent</span> <span class='op'>&lt;-</span> 
  <span class='fu'><a href='yaml_agent_interrogate.html'>yaml_agent_interrogate</a></span><span class='op'>(</span>
    filename <span class='op'>=</span> <span class='va'>yml_file</span>
  <span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>agent</span><span class='op'>)</span>

<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Richard Iannone, Mauricio Vargas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


