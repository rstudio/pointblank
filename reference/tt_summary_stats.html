<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Table Transformer: obtain a summary stats table for numeric columns — tt_summary_stats • pointblank</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Table Transformer: obtain a summary stats table for numeric columns — tt_summary_stats"><meta name="description" content='With any table object, you can produce a summary table that is scoped to the
numeric column values. The output summary table will have a leading column
called ".param." with labels for each of the nine rows, each corresponding
to the following summary statistics:
Minimum ("min")
5th Percentile ("p05")
1st Quartile ("q_1")
Median ("med")
3rd Quartile ("q_3")
95th Percentile ("p95")
Maximum ("max")
Interquartile Range ("iqr")
Range ("range")


Only numerical data from the input table will generate columns in the output
table. Column names from the input will be used in the output, preserving
order as well.'><meta property="og:description" content='With any table object, you can produce a summary table that is scoped to the
numeric column values. The output summary table will have a leading column
called ".param." with labels for each of the nine rows, each corresponding
to the following summary statistics:
Minimum ("min")
5th Percentile ("p05")
1st Quartile ("q_1")
Median ("med")
3rd Quartile ("q_3")
95th Percentile ("p95")
Maximum ("max")
Interquartile Range ("iqr")
Range ("range")


Only numerical data from the input table will generate columns in the output
table. Column names from the input will be used in the output, preserving
order as well.'><meta property="og:image" content="https://rstudio.github.io/pointblank/logo.svg"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pointblank</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.12.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pointblank.html">Get Started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Validation Workflows</h6></li>
    <li><a class="dropdown-item" href="../articles/validation_workflows.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-I.html">VALID-I: Data Quality Reporting</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-II.html">VALID-II: Pipeline Data Validation</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-III.html">VALID-III: Expectations in Unit Tests</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-IV.html">VALID-IV: Data Tests for Conditionals</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-V.html">VALID-V: Table Scan</a></li>
    <li><a class="dropdown-item" href="../articles/VALID-VI.html">VALID-VI: R Markdown Document Validation</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Management</h6></li>
    <li><a class="dropdown-item" href="../articles/INFO-1.html">Intro to Information Management</a></li>
    <li><a class="dropdown-item" href="../articles/INFO-2.html">Advanced Information Management</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/pointblank/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Table Transformer: obtain a summary stats table for numeric columns</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/pointblank/blob/main/R/table_transformers.R" class="external-link"><code>R/table_transformers.R</code></a></small>
      <div class="d-none name"><code>tt_summary_stats.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>With any table object, you can produce a summary table that is scoped to the
numeric column values. The output summary table will have a leading column
called <code>".param."</code> with labels for each of the nine rows, each corresponding
to the following summary statistics:</p><ol><li><p>Minimum (<code>"min"</code>)</p></li>
<li><p>5th Percentile (<code>"p05"</code>)</p></li>
<li><p>1st Quartile (<code>"q_1"</code>)</p></li>
<li><p>Median (<code>"med"</code>)</p></li>
<li><p>3rd Quartile (<code>"q_3"</code>)</p></li>
<li><p>95th Percentile (<code>"p95"</code>)</p></li>
<li><p>Maximum (<code>"max"</code>)</p></li>
<li><p>Interquartile Range (<code>"iqr"</code>)</p></li>
<li><p>Range (<code>"range"</code>)</p></li>
</ol><p>Only numerical data from the input table will generate columns in the output
table. Column names from the input will be used in the output, preserving
order as well.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tt_summary_stats</span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-tbl">tbl<a class="anchor" aria-label="anchor" href="#arg-tbl"></a></dt>
<dd><p><em>A data table</em></p>
<p><code>obj:&lt;tbl_*&gt;</code> // <strong>required</strong></p>
<p>A table object to be used as input for the transformation. This can be a
data frame, a tibble, a <code>tbl_dbi</code> object, or a <code>tbl_spark</code> object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>tibble</code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>



<p>Get summary statistics for the <code>game_revenue</code> dataset that is included in the
<strong>pointblank</strong> package.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/tt_summary_stats.html">tt_summary_stats</a></span><span class="op">(</span>tbl <span class="op">=</span> <span class="va">game_revenue</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 9 x 3</span></span>
<span><span class="co">#&gt;   .param. item_revenue session_duration</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 min             0                 3.2</span></span>
<span><span class="co">#&gt; 2 p05             0.02              8.2</span></span>
<span><span class="co">#&gt; 3 q_1             0.09             18.5</span></span>
<span><span class="co">#&gt; 4 med             0.38             26.5</span></span>
<span><span class="co">#&gt; 5 q_3             1.25             33.8</span></span>
<span><span class="co">#&gt; 6 p95            22.0              39.5</span></span>
<span><span class="co">#&gt; 7 max           143.               41</span></span>
<span><span class="co">#&gt; 8 iqr             1.16             15.3</span></span>
<span><span class="co">#&gt; 9 range         143.               37.8</span></span></code></pre><p></p></div>
<p>Table transformers work great in conjunction with validation functions. Let's
ensure that the maximum revenue for individual purchases in the
<code>game_revenue</code> table is less than $150.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/tt_summary_stats.html">tt_summary_stats</a></span><span class="op">(</span>tbl <span class="op">=</span> <span class="va">game_revenue</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/col_vals_lt.html">col_vals_lt</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="va">item_revenue</span>,</span>
<span>    value <span class="op">=</span> <span class="fl">150</span>,</span>
<span>    segments <span class="op">=</span> <span class="va">.param.</span> <span class="op">~</span> <span class="st">"max"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 9 x 3</span></span>
<span><span class="co">#&gt;   .param. item_revenue session_duration</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 min             0                 3.2</span></span>
<span><span class="co">#&gt; 2 p05             0.02              8.2</span></span>
<span><span class="co">#&gt; 3 q_1             0.09             18.5</span></span>
<span><span class="co">#&gt; 4 med             0.38             26.5</span></span>
<span><span class="co">#&gt; 5 q_3             1.25             33.8</span></span>
<span><span class="co">#&gt; 6 p95            22.0              39.5</span></span>
<span><span class="co">#&gt; 7 max           143.               41</span></span>
<span><span class="co">#&gt; 8 iqr             1.16             15.3</span></span>
<span><span class="co">#&gt; 9 range         143.               37.8</span></span></code></pre><p></p></div>
<p>We see data, and not an error, so the validation was successful!</p>
<p>Let's do another: for in-app purchases in the <code>game_revenue</code> table, check
that the median revenue is somewhere between $8 and $12.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">game_revenue</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">item_type</span> <span class="op">==</span> <span class="st">"iap"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/tt_summary_stats.html">tt_summary_stats</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/col_vals_between.html">col_vals_between</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="va">item_revenue</span>,</span>
<span>    left <span class="op">=</span> <span class="fl">8</span>, right <span class="op">=</span> <span class="fl">12</span>,</span>
<span>    segments <span class="op">=</span> <span class="va">.param.</span> <span class="op">~</span> <span class="st">"med"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 9 x 3</span></span>
<span><span class="co">#&gt;   .param. item_revenue session_duration</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 min             0.4              3.2</span></span>
<span><span class="co">#&gt; 2 p05             1.39             5.99</span></span>
<span><span class="co">#&gt; 3 q_1             4.49            14.0</span></span>
<span><span class="co">#&gt; 4 med            10.5             22.6</span></span>
<span><span class="co">#&gt; 5 q_3            20.3             30.6</span></span>
<span><span class="co">#&gt; 6 p95            66.0             38.8</span></span>
<span><span class="co">#&gt; 7 max           143.              41</span></span>
<span><span class="co">#&gt; 8 iqr            15.8             16.7</span></span>
<span><span class="co">#&gt; 9 range         143.              37.8</span></span></code></pre><p></p></div>
<p>We can get more creative with this transformer. Why not use a transformed
table in a validation plan? While performing validations of the
<code>game_revenue</code> table with an agent we can include the same revenue check as
above by using <code>tt_summary_stats()</code> in the <code>preconditions</code> argument. This
transforms the target table into a summary table for the validation step. The
final step of the transformation in <code>preconditions</code> is a <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code>
step that isolates the row of the median statistic.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">agent</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/create_agent.html">create_agent</a></span><span class="op">(</span></span>
<span>    tbl <span class="op">=</span> <span class="va">game_revenue</span>,</span>
<span>    tbl_name <span class="op">=</span> <span class="st">"game_revenue"</span>,</span>
<span>    label <span class="op">=</span> <span class="st">"`tt_summary_stats()` example."</span>,</span>
<span>    actions <span class="op">=</span> <span class="fu"><a href="../reference/action_levels.html">action_levels</a></span><span class="op">(</span></span>
<span>      warn_at <span class="op">=</span> <span class="fl">0.10</span>,</span>
<span>      stop_at <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>      notify_at <span class="op">=</span> <span class="fl">0.35</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rows_complete.html">rows_complete</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rows_distinct.html">rows_distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/col_vals_between.html">col_vals_between</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="va">item_revenue</span>,</span>
<span>    left <span class="op">=</span> <span class="fl">8</span>, right <span class="op">=</span> <span class="fl">12</span>,</span>
<span>    preconditions <span class="op">=</span> <span class="op">~</span> <span class="va">.</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">item_type</span> <span class="op">==</span> <span class="st">"iap"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/tt_summary_stats.html">tt_summary_stats</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.param.</span> <span class="op">==</span> <span class="st">"med"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/interrogate.html">interrogate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre><p></p></div>
<p>Printing the <code>agent</code> in the console shows the validation report in the
Viewer. Here is an excerpt of validation report. Take note of the final step
(<code>STEP 3</code>) as it shows the entry that corresponds to the <code><a href="col_vals_between.html">col_vals_between()</a></code>
validation step that uses the summary stats table as its target.</p>
<p><img src="https://raw.githubusercontent.com/rstudio/pointblank/main/images/man_tt_summary_stats_1.png" alt="This image was generated from the first code example in the `tt_summary_stats()` help file." style="width:100%;"></p>
    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>


<p>12-1</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Table Transformers:
<code><a href="get_tt_param.html">get_tt_param</a>()</code>,
<code><a href="tt_string_info.html">tt_string_info</a>()</code>,
<code><a href="tt_tbl_colnames.html">tt_tbl_colnames</a>()</code>,
<code><a href="tt_tbl_dims.html">tt_tbl_dims</a>()</code>,
<code><a href="tt_time_shift.html">tt_time_shift</a>()</code>,
<code><a href="tt_time_slice.html">tt_time_slice</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Richard Iannone, Mauricio Vargas, June Choe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

